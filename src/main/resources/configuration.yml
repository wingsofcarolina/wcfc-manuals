root: ${ROOT:-./root}

# Location of the MongoDB server
# Supports both mongodb:// and mongodb+srv:// connection strings
# For local Docker: mongodb://mongodb
# For MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/database
mongodb: ${MONGODB:-mongodb://mongodb}

# MongoDB database name
mongodbDatabase: ${MONGODB_DATABASE:-wcfc-manuals}

# URL of the server where the manuals service is running
manualsServer: ${MANUALSSERVER:-https://manuals.wingsofcarolina.org}

# Operational mode, DEV or PROD
mode: ${MODE:-PROD}

# Authentication, ON or OFF
auth: ${AUTH:-ON}

# Mock user
mockUser: ${MOCKUSER:-none}

# Slack channels
slackNotify: ${SLACK_TOKEN_NOTIFICATIONS:-none}     # Targets #notification
slackManuals: ${SLACK_TOKEN_MANUALS:-none}    # Targets #manuals

# Gmail API configuration
# Note: gmailServiceAccountKey is read directly from GMAIL_SERVICE_ACCOUNT_KEY environment variable
# Set GMAIL_DISABLED=true to disable Gmail functionality for local development
gmailImpersonateUser: ${GMAIL_IMPERSONATE_USER:-no-reply@wingsofcarolina.org}

# API base URLs (configurable for integration testing with WireMock)
gmailApiBaseUrl: ${GMAIL_API_BASE_URL:-https://www.googleapis.com}
slackApiBaseUrl: ${SLACK_API_BASE_URL:-https://hooks.slack.com}

# Scheduled jobs are now handled via HTTP endpoints called by Cloud Scheduler

# Configure ports used by DropWizard
server:
    type: simple
    connector:
        type: http
        port: ${SERVER_PORT:-9300}
        protocols:
          - http/1.1
          - h2c
    applicationContextPath: /
    adminContextPath: /admin
    requestLog:
        appenders:
          - type: file
            currentLogFilename: ${LOG_DIR:-/log}/manuals-http.log
            threshold: ALL
            archive: true
            archivedLogFilenamePattern: ${LOG_DIR:-/log}/manuals-%i-%d-http.log
            maxFileSize: 500MB
            archivedFileCount: 5
            timeZone: UTC

# SLF4j Logging settings.
logging:
  # The default level of all loggers. Can be OFF, ERROR, WARN, INFO, DEBUG, TRACE, or ALL.
  level: ${DEFAULT_LOGLEVEL:-INFO}

  # Logger-specific levels.
  loggers:
    "org.wingsofcarolina.manuals": ${LOGLEVEL:-INFO}
    
  appenders:
      - type: console
        threshold: ALL
        timeZone: UTC
        target: stdout
      - type: file
        currentLogFilename: ${LOG_DIR:-/log}/manuals.log
        threshold: ALL
        archive: true
        archivedLogFilenamePattern: ${LOG_DIR:-/log}/manuals-%i-%d.log
        maxFileSize: 500MB
        archivedFileCount: 5
        timeZone: UTC
